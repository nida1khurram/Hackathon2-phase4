"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[136],{9376:function(e,t,s){var a=s(5475);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},5573:function(e,t,s){s.d(t,{T:function(){return r}});var a=s(7437);let r=e=>{let{size:t="md",text:s}=e;return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,a.jsx)("div",{className:"".concat({sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"}[t]," ").concat({sm:"border-2",md:"border-4",lg:"border-4"}[t]," border-gray-200 border-t-indigo-600 rounded-full animate-spin flex-shrink-0")}),s&&(0,a.jsx)("p",{className:"mt-2 text-sm text-gray-600 text-center",children:s})]})}},1902:function(e,t,s){s.d(t,{Z:function(){return i}});var a=s(7437),r=s(2265),l=s(9376);let n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"guest",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3?arguments[3]:void 0;try{let r={"Content-Type":"application/json"};s&&(r.Authorization="Bearer ".concat(s));let l=await fetch("".concat("http://localhost:8001","/api/").concat(t,"/chat"),{method:"POST",headers:r,body:JSON.stringify({message:e,conversation_id:a})});if(!l.ok){let e=await l.json().catch(()=>({error:"Unknown error"}));throw Error(e.detail||"HTTP error! status: ".concat(l.status))}return await l.json()}catch(e){throw console.error("Error sending message:",e),e}};var o=s(7206),i=e=>{let{onTaskOperation:t}=e,s=(0,l.useRouter)(),{user:i,loading:c,verifyUser:d}=(0,o.a)(),[u,h]=(0,r.useState)(""),[m,x]=(0,r.useState)([]),[g,f]=(0,r.useState)(!1),[p,y]=(0,r.useState)(null),b=(0,r.useRef)(null);(0,r.useEffect)(()=>{j()},[m]);let j=()=>{var e;null===(e=b.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},w=async e=>{if(e.preventDefault(),!u.trim())return;let s=localStorage.getItem("auth_token"),a={id:Date.now().toString(),content:u,role:"user",timestamp:new Date};x(e=>[...e,a]),h(""),f(!0);try{var r;let e=await n(u,(null==i?void 0:null===(r=i.id)||void 0===r?void 0:r.toString())||"guest",s||"",p?p.toString():void 0);!p&&e.conversation_id&&y(e.conversation_id);let a={id:"ai-".concat(Date.now()),content:e.response,role:"assistant",timestamp:new Date};x(e=>[...e,a]);let l=e.response.toLowerCase();l.includes("task")&&(l.includes("added")||l.includes("deleted")||l.includes("completed")||l.includes("updated")||l.includes("created"))&&setTimeout(()=>{t&&t()},500)}catch(t){console.error("Error sending message:",t);let e={id:"error-".concat(Date.now()),content:"Sorry, I encountered an error processing your request. Please try again.",role:"assistant",timestamp:new Date};x(t=>[...t,e])}finally{f(!1)}};return c?(0,a.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):i?(0,a.jsxs)("div",{className:"flex flex-col h-full max-w-4xl mx-auto bg-white rounded-lg shadow-md overflow-hidden",children:[(0,a.jsxs)("div",{className:"bg-gray-100 p-4 border-b",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Todo AI Assistant"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Manage your tasks with AI assistance"})]}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50 max-h-[500px]",children:[0===m.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center p-4",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})})}),(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-700",children:"Welcome to Todo AI Assistant!"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"I can help you manage your tasks. Try asking me to add, list, complete, or delete tasks."}),(0,a.jsxs)("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-2 text-sm text-left",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded-md",children:[(0,a.jsx)("p",{className:"font-medium text-blue-800",children:"Examples:"}),(0,a.jsxs)("ul",{className:"list-disc list-inside mt-1 text-blue-700",children:[(0,a.jsx)("li",{children:'Add "Buy groceries" to my tasks'}),(0,a.jsx)("li",{children:"Show me my tasks"})]})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-3 rounded-md",children:[(0,a.jsx)("p",{className:"font-medium text-green-800",children:"\xa0"}),(0,a.jsxs)("ul",{className:"list-disc list-inside mt-1 text-green-700",children:[(0,a.jsx)("li",{children:"Complete task #1"}),(0,a.jsx)("li",{children:'Delete task "Buy groceries"'})]})]})]})]}):m.map(e=>(0,a.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,a.jsxs)("div",{className:"max-w-[80%] rounded-lg px-4 py-2 ".concat("user"===e.role?"bg-blue-500 text-white":"bg-gray-200 text-gray-800"),children:[(0,a.jsx)("div",{className:"whitespace-pre-wrap",children:e.content}),(0,a.jsx)("div",{className:"text-xs mt-1 ".concat("user"===e.role?"text-blue-200":"text-gray-500"),children:e.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},e.id)),g&&(0,a.jsx)("div",{className:"flex justify-start",children:(0,a.jsx)("div",{className:"bg-gray-200 text-gray-800 rounded-lg px-4 py-2 max-w-[80%]",children:(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-500 animate-bounce"}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-500 animate-bounce delay-75"}),(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-gray-500 animate-bounce delay-150"})]})})}),(0,a.jsx)("div",{ref:b})]}),(0,a.jsxs)("form",{onSubmit:w,className:"border-t bg-white p-4",children:[(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"Type your message...",className:"flex-1 border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:g}),(0,a.jsx)("button",{type:"submit",disabled:!u.trim()||g,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Send"})]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"Ask me to add, list, complete, or delete tasks"})]})]}):(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"Please Log In"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"You need to be logged in to use the chat feature"}),(0,a.jsx)("button",{onClick:()=>s.push("/login"),className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md",children:"Login"})]})}},7206:function(e,t,s){s.d(t,{H:function(){return o},a:function(){return i}});var a=s(7437),r=s(2265),l=s(9376);let n=(0,r.createContext)(void 0);function o(e){let{children:t}=e,[o,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(!0),u=(0,l.useRouter)();(0,r.useEffect)(()=>{localStorage.getItem("auth_token")?g():d(!1)},[]);let h=async(e,t)=>{try{let s=await fetch("".concat("http://localhost:8001","/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(s.ok){let e=await s.json();localStorage.setItem("auth_token",e.access_token),i(e.user),u.push("/tasks")}else{let e=await s.json();throw Error(e.detail||"Login failed")}}catch(e){throw e}},m=async(e,t)=>{try{let s=await fetch("".concat("http://localhost:8001","/auth/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})});if(s.ok)u.push("/login");else{let e=await s.json();throw Error(e.detail||"Registration failed")}}catch(e){throw e}},x=async()=>{let{authAPI:e}=await s.e(898).then(s.bind(s,6898));await e.logout(),i(null),u.push("/login")},g=async()=>{try{d(!0);let e=localStorage.getItem("auth_token");if(!e)return i(null),!1;let t=await fetch("".concat("http://localhost:8001","/auth/me"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)return localStorage.removeItem("auth_token"),i(null),"/login"!==window.location.pathname&&u.push("/login"),!1;{let e=await t.json();return i(e),!0}}catch(e){return console.error("Error verifying user:",e),localStorage.removeItem("auth_token"),i(null),"/login"!==window.location.pathname&&u.push("/login"),!1}finally{d(!1)}};return(0,a.jsx)(n.Provider,{value:{user:o,loading:c,login:h,logout:x,register:m,verifyUser:g,isAuthenticated:!!o},children:t})}function i(){let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}}}]);